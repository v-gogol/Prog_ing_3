Для добавления новых типов расчетов (например, скидок) в систему с паттерном Visitor потребуется:

1. Создать нового посетителя — класс DiscountCalculator, унаследованный от ICalculator, с реализацией методов ProcessGoods() и ProcessContainer() для расчета скидок по вашим правилам.

2. Использовать нового посетителя — в нужном месте программы (например, в методе ShowDetails() класса Purchase) создать экземпляр DiscountCalculator, применить его к заказу через ApplyCalculator() и учесть результат в итоговом расчете.

Изменения минимальны и безопасны: не требуется модифицировать существующие классы товаров (Goods, Container) или другие посетители. Это основное преимущество паттерна Visitor — возможность добавлять новые операции без изменения структуры объектов.